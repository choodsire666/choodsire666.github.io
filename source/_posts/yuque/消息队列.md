---
title: 消息队列
urlname: bww7qf
date: '2022-09-15 15:25:14'
updated: '2024-03-04 21:16:48'
description: 'MQ简介 字面意思本质是个队列，FIFO先入先出，只不过队列中存放的内容是message而已，还是一种跨进程的通信机制，用于上下游传递消息。在互联网架构中，MQ是一种非常常见的上下游“逻辑解耦+物理解耦”的消息通信服务。使用了MQ之后，消息发送上游只需要依赖MQ,不用依赖其它服务为什么要用MQ...'
---
# MQ
## 简介 
字面意思本质是个队列，FIFO先入先出，只不过队列中存放的内容是message而已，还是一种跨进程的通信机制，用于上下游传递消息。在互联网架构中，MQ是一种非常常见的上下游“逻辑解耦+物理解耦”的消息通信服务。使用了MQ之后，消息发送上游只需要依赖MQ,不用依赖其它服务
## 为什么要用MQ
### 流量消峰
通过mq访问的人员进行排队，只限制订单超过一万后不允许用户下单。订单系统不至于宕机
使用消息队列做缓冲，我们可以取消这个限制，把一秒内下的订单分散一段时间来处理，这些用户可能在下单十几秒后才能收到下单成功的操作，但是比不能下单的体验要好。
### 应用解耦
如果耦合调用库存系统，物流系统，支付系统，任何一个子系统出了故障，都会造成下单操作异常。当转变成基于消息队列的方式后，系统间调用的问题会减少很多，比如物流系统因为发生故障，需要几分钟来修复。在这几分钟的时间里，物流系统要处理的内存被缓冲在消息队列中，用户下单的操作可以正常完成。当物流系统回复后，继续处理订单信息即可，中单用户感受不到物流系统的故障，提升系统的可用性。
### 异常处理
有些服务间调用是异步的，


